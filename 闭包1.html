<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<script type="text/javascript">
			//变量作用域两种：全局变量、局部变量。js中函数内部可以读取全局变量，函数外部不能读取函数内部的局部变量。
			//闭包的理解：能够读取其他函数内部变量的函数。或简单理解为定义在一个函数内部的函数，内部函数持有外部函数内变量的引用。
						//在本质上，闭包就是将函数内部和函数外部连接起来的一座桥梁。
			function f1 (){
		        var n = 123;
		        var f2 = function(){    //f2是一个闭包
		        	n++;
		        	alert(n);
		        	console.log('n', n); //124
		        }    
		        return f2; //把f2函数当做返回值
		    }
			//调用方式1
			var result=f1(); 
　　			result(); //124
			result(); //125
			result(); //126
			//调用方式2:函数名前加+，-，！等符号，后面加上小括号()
			//!f1()(); +f1()(); -f1()();
			//js链式作用域：子对象会一级一级向上寻找所有父对象的变量，反之不行。
			//f2可以读取f1中的变量，只要把f2作为返回值，就可以在f1外读取f2内部变量
			
			
			//注意1:由于闭包会使得函数中的变量都被保存在内存中，内存消耗很大，所以不能滥用闭包，否则会造成网页的性能问题，在IE中可能导致内存泄露。解决方法是，在退出函数之前，将不使用的局部变量全部删除。
			//注意2：2）闭包会在父函数外部，改变父函数内部变量的值。
				//所以，如果你把父函数当作对象（object）使用，把闭包当作它的公用方法（Public Method），
				//把内部变量当作它的私有属性（private value），这时一定要小心，不要随便改变父函数内部变量的值。
			/*function f1(){
		　　　　var n=999;
		　　　　nAdd=function(){n+=1; name = 'wupei';} //nAdd可以再函数外边进行调用；
		　　　　function f2(){
		　　　　　　alert(n);
		　　　　}
		　　　　return f2;
		　　}
		　　var result=f1();
		　　result(); // 999
		　　nAdd();
			nAdd();
		　　result(); // 1001*/
		   
		</script>
	</head>
	<body>
	</body>
</html>
